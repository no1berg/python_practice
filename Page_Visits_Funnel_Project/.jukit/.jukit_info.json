{"cmd": "import pandas as pd\n\n# |%%--%%| <nl0FItJUP9|DFb8qAxXA2>\nr\"\"\"°°°\nImport all the files\n°°°\"\"\"\n# |%%--%%| <DFb8qAxXA2|6q0wZsHXgS>\n\nvisits = pd.read_csv(\"visits.csv\", parse_dates=[1])\ncart = pd.read_csv(\"cart.csv\", parse_dates=[1])\n\ncheckout = pd.read_csv(\"checkout.csv\", parse_dates=[1])\npurchase = pd.read_csv(\"purchase.csv\", parse_dates=[1])\n\n# |%%--%%| <6q0wZsHXgS|o82KOCyhj4>\nr\"\"\"°°°\nStep 1: Inspect the DataFrames using `print` and `head`\n°°°\"\"\"\n# |%%--%%| <o82KOCyhj4|R8q8VhMyor>\n\nprint(visits.head(5))\nprint(cart.head(5))\nprint(checkout.head(5))\nprint(purchase.head(5))\n\n# |%%--%%| <R8q8VhMyor|xpHRTUZ2O3>\nr\"\"\"°°°\nStep 2: Left merging visits and cart\n°°°\"\"\"\n# |%%--%%| <xpHRTUZ2O3|aB4nkiHrNy>\n# Merge visits and cart into v_to_c dataframe\nvisits_cart = pd.merge(visits, cart, how=\"left\")\nprint(visits_cart)\n\n# |%%--%%| <aB4nkiHrNy|ziwdhGTlVQ>\nr\"\"\"°°°\nStep 3: How long is `visits_cart`?\n°°°\"\"\"\n# |%%--%%| <ziwdhGTlVQ|pqM1j77s8y>\n# Use len to find out the number of rows in visits_cart\nvisits_cart_len = len(visits_cart)\nprint(visits_cart_len)\n\n# |%%--%%| <pqM1j77s8y|cFInl39fiY>\nr\"\"\"°°°\nStep 4: How many timestamps are null for `cart_time`?\n°°°\"\"\"\n# |%%--%%| <cFInl39fiY|OQFh9tTV2o>\n# Find number of null rows in cart_time column\ncart_time_null = len(visits_cart[visits_cart[\"cart_time\"].isna()])\nprint(cart_time_null)\n\n# |%%--%%| <OQFh9tTV2o|0wREcQ0fG6>\nr\"\"\"°°°\nStep 5: What percentage only visited?\n°°°\"\"\"\n# |%%--%%| <0wREcQ0fG6|sgkMAQskF4>\n# Calculate the percentage of visitors that didn't continue to cart\nvisitors_didnt_go_to_cart = cart_time_null * 100 / float(visits_cart_len)\nprint(f\"Visitors that didn't add items to their carts: {visitors_didnt_go_to_cart}%\")\n\n# |%%--%%| <sgkMAQskF4|2XbMyVl63I>\nr\"\"\"°°°\nStep 6: What percentage placed a t-shirt in their cart but did not checkout?\n°°°\"\"\"\n# |%%--%%| <2XbMyVl63I|r4PZ5WWQOr>\n# Perform a left merge on cart and checkout\ncart_checkout = pd.merge(cart, checkout, how=\"left\")\nprint(cart_checkout.head(10))\n# Find len of cart_checkout\ncart_checkout_len = len(cart_checkout)\nprint(cart_checkout_len)\n# Find number of null in checkout_time column\ncheckout_time_null = len(cart_checkout[cart_checkout[\"checkout_time\"].isna()])\nprint(checkout_time_null)\n# Calculate the percentage of users who added item to cart, but didnt check out\ncart_didnt_go_to_checkout = checkout_time_null * 100 / float(cart_checkout_len)\nprint(\n    f\"Users who added item to cart, but did not checkout: {round(cart_didnt_go_to_checkout, 2)}%\"\n)\n\n\n# |%%--%%| <r4PZ5WWQOr|Vn5cjdlJo3>\nr\"\"\"°°°\nStep 7: Merge it all together\n°°°\"\"\"\n# |%%--%%| <Vn5cjdlJo3|MWBbtpVpa3>\n# Merge visits and cart (already done)\n# Merge visits_cart with checkout\nvisits_cart_checkout = pd.merge(visits_cart, checkout, how=\"left\")\n# Merge visits_cart_checkout with purchase\nall_data = pd.merge(visits_cart_checkout, purchase, how=\"left\")\nprint(all_data)\n\n# |%%--%%| <MWBbtpVpa3|WigpUR9I7W>\nr\"\"\"°°°\nStep 8: % of users who got to checkout but did not purchase\n°°°\"\"\"\n# |%%--%%| <WigpUR9I7W|1UY9Crt9d7>\n# Calculate the len of checkout (that are not Null)\ncheckout_time_len = len(all_data[all_data.checkout_time.notna()])\n# Calculate the len of purchase (that are not Null)\npurchase_time_len = len(all_data[all_data.purchase_time.notna()])\n\n# Calculate the percent of users who entered checkout,\n# but did not finalize purchase\ncheckout_not_purchased = purchase_time_len * 100 / float(checkout_time_len)\nprint(\n    f\"Users who entered checkout, but did not finalize purchase: {round(checkout_not_purchased, 2)}%\"\n)\n\n\n# |%%--%%| <1UY9Crt9d7|F4wlW7q371>\nr\"\"\"°°°\nStep 9: check each part of the funnel, let's print all 3 of them again\n°°°\"\"\"\n# |%%--%%| <F4wlW7q371|rzj81nU3Nk>\n# The weakest part of the funnel is the visitor to cart stage\nprint(f\"Visitors who did not add items to carts: {round(visitors_didnt_go_to_cart), 2}\")\nprint(f\"Users who added items to cart, but did not check out: {round(cart_didnt_go_to_checkout, 2)}\")\nprint(f\"Users who entered checkout but did not finalize purchase: {round(checkout_not_purchased, 2)}\")\n# Steps to improve this part of the funnel should focus on incentivising users,\n# to add products to their carts. One such step might be redesigning the UI,\n# enhancing the user experience, and simplifying the process of adding\n# products to the cart\n\n# |%%--%%| <rzj81nU3Nk|3fMhsmpAs9>\nr\"\"\"°°°\n*The weakest part of the funnel is clearly getting a person who visited the site to add a tshirt to their cart. Once they've added a t-shirt to their cart it is fairly likely they end up purchasing it. A suggestion could be to make the add-to-cart button more prominent on the front page.*\n\n\nStep 10: adding new column\n°°°\"\"\"\n# |%%--%%| <3fMhsmpAs9|QcgAlKVxzg>\n# Calculate time from initial visit to final purchase, as a column\nall_data['time_visit_to_purchase'] = all_data.purchase_time - all_data.visit_time\n# |%%--%%| <QcgAlKVxzg|N5dn13NHUH>\nr\"\"\"°°°\nStep 11: examine the results\n°°°\"\"\"\n# |%%--%%| <N5dn13NHUH|koVEWLyChU>\nprint(all_data.time_visit_to_purchase)\n\n# |%%--%%| <koVEWLyChU|5gaq9NlMS5>\nr\"\"\"°°°\nStep 12: average time to purchase\n°°°\"\"\"\n# |%%--%%| <5gaq9NlMS5|W7YJpOi9yL>\n# Calculate the average time between initial visit and final purchase\ntime_visit_to_purchase_mean = all_data.time_visit_to_purchase.mean()\nprint(time_visit_to_purchase_mean)\n\n\n\n# |%%--%%| <W7YJpOi9yL|OHLZ7dXaDa>", "outhist_cell": "aB4nkiHrNy", "output_complete": 1, "is_md": 0, "cmd_opts": " -s --md_cell_start=r\\\"\\\"\\\"°°°", "import_complete": 1, "terminal": "nvimterm"}